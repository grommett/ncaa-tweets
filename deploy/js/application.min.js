Utils=function Utils(){this.addCommas=function addCommas($nStr$$){$nStr$$=String($nStr$$);for(var $rgx$$=/(\d+)(\d{3})/;$rgx$$.test($nStr$$);)$nStr$$=$nStr$$.replace($rgx$$,"$1,$2");return $nStr$$};return this}();function Log($s$$){try{console.log($s$$)}catch($e$$){}}function Event($$type$$,$$target$$){this.target=$$target$$;this.type=$$type$$}
EventManager=function(){this.events=[];this.addEvent=function $this$addEvent$($eventType$$,$observer$$,$broadcaster$$,$method$$){this.events.push({observer:$observer$$,method:$method$$,broadcaster:$broadcaster$$,eventType:$eventType$$})};this.dispatchEvent=function $this$dispatchEvent$($eventType$$,$target$$){for(var $i$$ in this.events){var $eType$$=this.events[$i$$].eventType,$observer$$=this.events[$i$$].observer,$method$$=this.events[$i$$].method;b=this.events[$i$$].broadcaster;if($eType$$==$eventType$$&&
$target$$==b){$method$$.call($observer$$,new Event($eType$$,$target$$));return true}}};this.removeEventListener=function $this$removeEventListener$($eventType$$,$observer$$){var $e$$,$o$$,$i$$;for($i$$ in this.events){$e$$=this.events[$i$$].eventType;$o$$=this.events[$i$$].observer;$e$$==$eventType$$&&$observer$$==$o$$&&this.events.splice($i$$,1)}};return this}();
function EventDispatcher(){function $addEventListener$$($eventName$$,$func$$){$e$$.addEvent($eventName$$,$addEventListener$$.caller,this,$func$$)}var $e$$=EventManager;this.addEventListener=$addEventListener$$;this.dispatchEvent=function dispatchEvent($type$$,$target$$){$e$$.dispatchEvent($type$$,$target$$)}}
TweetParser=function TweetParser(){function $parseUser$$($str$$){var $userArray$$=$str$$.match($userNameReg$$);if($userArray$$==null)return $str$$;for(var $total$$=$userArray$$.length-1,$i$$=0;$i$$<=$total$$;$i$$++){replaceString="<a href='http://twitter.com/"+$userArray$$[$i$$]+"' target='_blank'>"+$userArray$$[$i$$]+"</a>";$str$$=$str$$.replace($userArray$$[$i$$],replaceString)}return $str$$}var $httpReg$$=/(http|https|ftp)([^ ]+)/gi,$userNameReg$$=/(^|)@(\w+)/g,$hashReg$$=/(^|)#(\w+)/g;this.parse=
function parse($str$$7_str$$inline_13_str$$){var $hashArray$$inline_14_linkArray$$=$str$$7_str$$inline_13_str$$.match($httpReg$$);if($hashArray$$inline_14_linkArray$$!=null)for(var $total$$inline_15_total$$=$hashArray$$inline_14_linkArray$$.length-1,$i$$inline_16_i$$=0;$i$$inline_16_i$$<=$total$$inline_15_total$$;$i$$inline_16_i$$++){replaceString="<a href='"+$hashArray$$inline_14_linkArray$$[$i$$inline_16_i$$]+"' target='_blank' rel='nofollow' class='twitter-timeline-link'>"+$hashArray$$inline_14_linkArray$$[$i$$inline_16_i$$]+
"</a>";$str$$7_str$$inline_13_str$$=$str$$7_str$$inline_13_str$$.replace($hashArray$$inline_14_linkArray$$[$i$$inline_16_i$$],replaceString)}$hashArray$$inline_14_linkArray$$=$str$$7_str$$inline_13_str$$.match($hashReg$$);if($hashArray$$inline_14_linkArray$$!=null){$total$$inline_15_total$$=$hashArray$$inline_14_linkArray$$.length-1;for($i$$inline_16_i$$=0;$i$$inline_16_i$$<=$total$$inline_15_total$$;$i$$inline_16_i$$++){replaceString="<a href='http://search.twitter.com/search?q="+$hashArray$$inline_14_linkArray$$[$i$$inline_16_i$$].replace("#",
"%23")+"' target='_blank'>"+$hashArray$$inline_14_linkArray$$[$i$$inline_16_i$$]+"</a>";$str$$7_str$$inline_13_str$$=$str$$7_str$$inline_13_str$$.replace($hashArray$$inline_14_linkArray$$[$i$$inline_16_i$$],replaceString)}}return $str$$7_str$$inline_13_str$$=$parseUser$$($str$$7_str$$inline_13_str$$)};this.swapHash=function swapHash($s$$){$s$$.replace("#","%23");return $s$$};this.parseUser=$parseUser$$;return this}();MediaParser.prototype=new EventDispatcher;MediaParser.constructor=MediaParser;
function MediaParser(){function $plixi$$($url$$,$id$$){var $large$$;$self$$.thumb="http://api.plixi.com/api/tpapi.svc/json/imagefromurl?size=thumbnail&url=http://tweetphoto.com/"+$id$$;$self$$.largeImage="http://api.plixi.com/api/tpapi.svc/json/imagefromurl?size=large&url=http://tweetphoto.com/"+$id$$;$self$$.source=$url$$.indexOf("tweetphoto")!=-1?"tweetphoto":"twitpic";dispatchEvent("onImageData",$self$$)}function $flickr$$($url$$,$id$$){key="a99190c3186dafc012543e6e048865f3";secret="6899beb0fb0c5513";
var $fid$$=$url$$.split("http://flic.kr/p/")[1];$id$$=$base58_decode$$($fid$$);$.ajax({url:"http://api.flickr.com/services/rest/",dataType:"jsonp",data:"method=flickr.photos.getInfo&api_key="+key+"&photo_id="+$id$$+"&format=json&jsoncallback=?",success:$onFlickrImgURL$$,error:function(){Log("error conencting to twitter")}});$self$$.thumb="http://flic.kr/p/img/"+$fid$$+"_s.jpg";$self$$.source="flickr"}function $onFlickrImgURL$$($d$$){$self$$.largeImage="http://farm"+$d$$.photo.farm+".static.flickr.com/"+
$d$$.photo.server+"/"+$d$$.photo.id+"_"+$d$$.photo.secret+"_z.jpg";dispatchEvent("onImageData",$self$$)}function $base58_decode$$($id$$){for(var $decoded$$=0,$multi$$=1,$i$$=$id$$.length-1;$i$$>=0;$i$$--){$decoded$$+=$multi$$*"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ".indexOf($id$$[$i$$]);$multi$$*=58}return $decoded$$}var $self$$=this;this.getImage=function getImage($t$$){var $slug$$,$i$$;for($i$$ in domains)($slug$$=$t$$.match(domains[$i$$].domain))&&domains[$i$$].process($slug$$[0],
$slug$$[1])};domains=[{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?yfrog\.com\/(\S+)/,process:function yFrog($url$$,$id$$){var $large$$;$self$$.thumb="http://yfrog.com/"+$id$$+":small";$self$$.largeImage="http://yfrog.com/"+$id$$+":iphone";$self$$.source="yFrog";dispatchEvent("onImageData",$self$$)}},{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?(?:www\.)?twitpic\.com\/(\S+)/,process:function twitpic($url$$,$id$$){var $large$$;$self$$.thumb="http://twitpic.com/show/mini/"+$id$$;$self$$.largeImage="http://twitpic.com/show/large/"+
$id$$;$self$$.source="twitpic";dispatchEvent("onImageData",$self$$)}},{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?(?:www\.)?tweetphoto\.com\/(\d+)/i,process:$plixi$$},{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?(?:www\.)?plixi\.com\/p\/(\d+)/i,process:$plixi$$},{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?(?:www\.)?m\.plixi\.com\/p\/(\d+)/i,process:$plixi$$},{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?(?:www\.)?photozou\.(?:com|jp)\/photo\/show\/\d+\/(\d+)/i,process:function photozou($url$$,$id$$){var $large$$;
$self$$.thumb="http://photozou.jp/p/img/"+$id$$;$self$$.largeImage="http://photozou.jp/p/img/"+$id$$;$self$$.source="photozou";dispatchEvent("onImageData",$self$$)}},{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?(?:www\.)?flic\.kr\/p\/[a-z0-9]+\/?$/i,process:$flickr$$},{domain:/\b(?:(?:https?\:\/\/)?(?:www\.)?)?(?:www\.)?flic\.kr\/(?!p\/)([\w\@\-]+)\/?$/i,process:$flickr$$}];return this};